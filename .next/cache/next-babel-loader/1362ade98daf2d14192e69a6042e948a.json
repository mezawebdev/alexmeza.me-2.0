{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t(require(\"babylonjs\")) : \"function\" == typeof define && define.amd ? define(\"babylonjs-materials\", [\"babylonjs\"], t) : \"object\" == typeof exports ? exports[\"babylonjs-materials\"] = t(require(\"babylonjs\")) : e.MATERIALS = t(e.BABYLON);\n}(\"undefined\" != typeof self ? self : \"undefined\" != typeof global ? global : this, function (e) {\n  return function (e) {\n    var t = {};\n\n    function i(n) {\n      if (t[n]) return t[n].exports;\n      var r = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n    }\n\n    return i.m = e, i.c = t, i.d = function (e, t, n) {\n      i.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, i.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, i.t = function (e, t) {\n      if (1 & t && (e = i(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (i.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var r in e) i.d(n, r, function (t) {\n        return e[t];\n      }.bind(null, r));\n      return n;\n    }, i.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return i.d(t, \"a\", t), t;\n    }, i.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, i.p = \"\", i(i.s = 25);\n  }({\n    0: function (t, i) {\n      t.exports = e;\n    },\n    1: function (e, t, i) {\n      \"use strict\";\n\n      i.d(t, \"b\", function () {\n        return r;\n      }), i.d(t, \"a\", function () {\n        return o;\n      });\n      /*! *****************************************************************************\n      Copyright (c) Microsoft Corporation. All rights reserved.\n      Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\n      this file except in compliance with the License. You may obtain a copy of the\n      License at http://www.apache.org/licenses/LICENSE-2.0\n      \n      THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n      KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\n      WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\n      MERCHANTABLITY OR NON-INFRINGEMENT.\n      \n      See the Apache Version 2.0 License for specific language governing permissions\n      and limitations under the License.\n      ***************************************************************************** */\n\n      var n = function (e, t) {\n        return (n = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (e, t) {\n          e.__proto__ = t;\n        } || function (e, t) {\n          for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]);\n        })(e, t);\n      };\n\n      function r(e, t) {\n        function i() {\n          this.constructor = e;\n        }\n\n        n(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n      }\n\n      function o(e, t, i, n) {\n        var r,\n            o = arguments.length,\n            a = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;\n        if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) a = Reflect.decorate(e, t, i, n);else for (var c = e.length - 1; c >= 0; c--) (r = e[c]) && (a = (o < 3 ? r(a) : o > 3 ? r(t, i, a) : r(t, i)) || a);\n        return o > 3 && a && Object.defineProperty(t, i, a), a;\n      }\n    },\n    11: function (e, t, i) {\n      \"use strict\";\n\n      i.r(t);\n      var n = i(1),\n          r = i(0),\n          o = \"#extension GL_OES_standard_derivatives : enable\\n#define SQRT2 1.41421356\\n#define PI 3.14159\\nprecision highp float;\\nuniform vec3 mainColor;\\nuniform vec3 lineColor;\\nuniform vec4 gridControl;\\nuniform vec3 gridOffset;\\n\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\n#include<fogFragmentDeclaration>\\n\\n#ifdef OPACITY\\nvarying vec2 vOpacityUV;\\nuniform sampler2D opacitySampler;\\nuniform vec2 vOpacityInfos;\\n#endif\\nfloat getVisibility(float position) {\\n\\nfloat majorGridFrequency=gridControl.y;\\nif (floor(position+0.5) == floor(position/majorGridFrequency+0.5)*majorGridFrequency)\\n{\\nreturn 1.0;\\n}\\nreturn gridControl.z;\\n}\\nfloat getAnisotropicAttenuation(float differentialLength) {\\nconst float maxNumberOfLines=10.0;\\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\\n}\\nfloat isPointOnLine(float position,float differentialLength) {\\nfloat fractionPartOfPosition=position-floor(position+0.5);\\nfractionPartOfPosition/=differentialLength;\\nfractionPartOfPosition=clamp(fractionPartOfPosition,-1.,1.);\\nfloat result=0.5+0.5*cos(fractionPartOfPosition*PI);\\nreturn result;\\n}\\nfloat contributionOnAxis(float position) {\\nfloat differentialLength=length(vec2(dFdx(position),dFdy(position)));\\ndifferentialLength*=SQRT2;\\n\\nfloat result=isPointOnLine(position,differentialLength);\\n\\nfloat visibility=getVisibility(position);\\nresult*=visibility;\\n\\nfloat anisotropicAttenuation=getAnisotropicAttenuation(differentialLength);\\nresult*=anisotropicAttenuation;\\nreturn result;\\n}\\nfloat normalImpactOnAxis(float x) {\\nfloat normalImpact=clamp(1.0-3.0*abs(x*x*x),0.0,1.0);\\nreturn normalImpact;\\n}\\nvoid main(void) {\\n\\nfloat gridRatio=gridControl.x;\\nvec3 gridPos=(vPosition+gridOffset.xyz)/gridRatio;\\n\\nfloat x=contributionOnAxis(gridPos.x);\\nfloat y=contributionOnAxis(gridPos.y);\\nfloat z=contributionOnAxis(gridPos.z);\\n\\nvec3 normal=normalize(vNormal);\\nx*=normalImpactOnAxis(normal.x);\\ny*=normalImpactOnAxis(normal.y);\\nz*=normalImpactOnAxis(normal.z);\\n\\nfloat grid=clamp(x+y+z,0.,1.);\\n\\nvec3 color=mix(mainColor,lineColor,grid);\\n#ifdef FOG\\n#include<fogFragment>\\n#endif\\nfloat opacity=1.0;\\n#ifdef TRANSPARENT\\nopacity=clamp(grid,0.08,gridControl.w*grid);\\n#endif\\n#ifdef OPACITY\\nopacity*=texture2D(opacitySampler,vOpacityUV).a;\\n#endif\\n\\ngl_FragColor=vec4(color.rgb,opacity);\\n#ifdef TRANSPARENT\\n#ifdef PREMULTIPLYALPHA\\ngl_FragColor.rgb*=opacity;\\n#endif\\n#else\\n#endif\\n}\";\n      r.Effect.ShadersStore.gridPixelShader = o;\n      var a = \"precision highp float;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\n#ifdef UV1\\nattribute vec2 uv;\\n#endif\\n#ifdef UV2\\nattribute vec2 uv2;\\n#endif\\n#include<instancesDeclaration>\\n\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\n#include<fogVertexDeclaration>\\n#ifdef OPACITY\\nvarying vec2 vOpacityUV;\\nuniform mat4 opacityMatrix;\\nuniform vec2 vOpacityInfos;\\n#endif\\nvoid main(void) {\\n#include<instancesVertex>\\nvec4 worldPos=finalWorld*vec4(position,1.0);\\n#include<fogVertex>\\nvec4 cameraSpacePosition=view*worldPos;\\ngl_Position=projection*cameraSpacePosition;\\n#ifdef OPACITY\\n#ifndef UV1\\nvec2 uv=vec2(0.,0.);\\n#endif\\n#ifndef UV2\\nvec2 uv2=vec2(0.,0.);\\n#endif\\nif (vOpacityInfos.x == 0.)\\n{\\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\\n}\\nelse\\n{\\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\\n}\\n#endif\\nvPosition=position;\\nvNormal=normal;\\n}\";\n      r.Effect.ShadersStore.gridVertexShader = a;\n\n      var c = function (e) {\n        function t() {\n          var t = e.call(this) || this;\n          return t.OPACITY = !1, t.TRANSPARENT = !1, t.FOG = !1, t.PREMULTIPLYALPHA = !1, t.UV1 = !1, t.UV2 = !1, t.INSTANCES = !1, t.rebuild(), t;\n        }\n\n        return Object(n.b)(t, e), t;\n      }(r.MaterialDefines),\n          f = function (e) {\n        function t(t, i) {\n          var n = e.call(this, t, i) || this;\n          return n.mainColor = r.Color3.Black(), n.lineColor = r.Color3.Teal(), n.gridRatio = 1, n.gridOffset = r.Vector3.Zero(), n.majorUnitFrequency = 10, n.minorUnitVisibility = .33, n.opacity = 1, n.preMultiplyAlpha = !1, n._gridControl = new r.Vector4(n.gridRatio, n.majorUnitFrequency, n.minorUnitVisibility, n.opacity), n;\n        }\n\n        return Object(n.b)(t, e), t.prototype.needAlphaBlending = function () {\n          return this.opacity < 1 || this._opacityTexture && this._opacityTexture.isReady();\n        }, t.prototype.needAlphaBlendingForMesh = function (e) {\n          return this.needAlphaBlending();\n        }, t.prototype.isReadyForSubMesh = function (e, t, i) {\n          if (this.isFrozen && t.effect && t.effect._wasPreviouslyReady) return !0;\n          t._materialDefines || (t._materialDefines = new c());\n          var n = t._materialDefines,\n              o = this.getScene();\n          if (!this.checkReadyOnEveryCall && t.effect && this._renderId === o.getRenderId()) return !0;\n\n          if (n.TRANSPARENT !== this.opacity < 1 && (n.TRANSPARENT = !n.TRANSPARENT, n.markAsUnprocessed()), n.PREMULTIPLYALPHA != this.preMultiplyAlpha && (n.PREMULTIPLYALPHA = !n.PREMULTIPLYALPHA, n.markAsUnprocessed()), n._areTexturesDirty && (n._needUVs = !1, o.texturesEnabled && this._opacityTexture && r.MaterialFlags.OpacityTextureEnabled)) {\n            if (!this._opacityTexture.isReady()) return !1;\n            n._needUVs = !0, n.OPACITY = !0;\n          }\n\n          if (r.MaterialHelper.PrepareDefinesForMisc(e, o, !1, !1, this.fogEnabled, !1, n), r.MaterialHelper.PrepareDefinesForFrameBoundValues(o, o.getEngine(), n, !!i), n.isDirty) {\n            n.markAsProcessed(), o.resetCachedMaterial(), r.MaterialHelper.PrepareDefinesForAttributes(e, n, !1, !1);\n            var a = [r.VertexBuffer.PositionKind, r.VertexBuffer.NormalKind];\n            n.UV1 && a.push(r.VertexBuffer.UVKind), n.UV2 && a.push(r.VertexBuffer.UV2Kind), r.MaterialHelper.PrepareAttributesForInstances(a, n);\n            var f = n.toString();\n            t.setEffect(o.getEngine().createEffect(\"grid\", a, [\"projection\", \"mainColor\", \"lineColor\", \"gridControl\", \"gridOffset\", \"vFogInfos\", \"vFogColor\", \"world\", \"view\", \"opacityMatrix\", \"vOpacityInfos\"], [\"opacitySampler\"], f, void 0, this.onCompiled, this.onError), n);\n          }\n\n          return !(!t.effect || !t.effect.isReady()) && (this._renderId = o.getRenderId(), t.effect._wasPreviouslyReady = !0, !0);\n        }, t.prototype.bindForSubMesh = function (e, t, i) {\n          var n = this.getScene(),\n              o = i._materialDefines;\n\n          if (o) {\n            var a = i.effect;\n            a && (this._activeEffect = a, o.INSTANCES || this.bindOnlyWorldMatrix(e), this._activeEffect.setMatrix(\"view\", n.getViewMatrix()), this._activeEffect.setMatrix(\"projection\", n.getProjectionMatrix()), this._mustRebind(n, a) && (this._activeEffect.setColor3(\"mainColor\", this.mainColor), this._activeEffect.setColor3(\"lineColor\", this.lineColor), this._activeEffect.setVector3(\"gridOffset\", this.gridOffset), this._gridControl.x = this.gridRatio, this._gridControl.y = Math.round(this.majorUnitFrequency), this._gridControl.z = this.minorUnitVisibility, this._gridControl.w = this.opacity, this._activeEffect.setVector4(\"gridControl\", this._gridControl), this._opacityTexture && r.MaterialFlags.OpacityTextureEnabled && (this._activeEffect.setTexture(\"opacitySampler\", this._opacityTexture), this._activeEffect.setFloat2(\"vOpacityInfos\", this._opacityTexture.coordinatesIndex, this._opacityTexture.level), this._activeEffect.setMatrix(\"opacityMatrix\", this._opacityTexture.getTextureMatrix()))), r.MaterialHelper.BindFogParameters(n, t, this._activeEffect), this._afterBind(t, this._activeEffect));\n          }\n        }, t.prototype.dispose = function (t) {\n          e.prototype.dispose.call(this, t);\n        }, t.prototype.clone = function (e) {\n          var i = this;\n          return r.SerializationHelper.Clone(function () {\n            return new t(e, i.getScene());\n          }, this);\n        }, t.prototype.serialize = function () {\n          var e = r.SerializationHelper.Serialize(this);\n          return e.customType = \"BABYLON.GridMaterial\", e;\n        }, t.prototype.getClassName = function () {\n          return \"GridMaterial\";\n        }, t.Parse = function (e, i, n) {\n          return r.SerializationHelper.Parse(function () {\n            return new t(e.name, i);\n          }, e, i, n);\n        }, Object(n.a)([Object(r.serializeAsColor3)()], t.prototype, \"mainColor\", void 0), Object(n.a)([Object(r.serializeAsColor3)()], t.prototype, \"lineColor\", void 0), Object(n.a)([Object(r.serialize)()], t.prototype, \"gridRatio\", void 0), Object(n.a)([Object(r.serializeAsColor3)()], t.prototype, \"gridOffset\", void 0), Object(n.a)([Object(r.serialize)()], t.prototype, \"majorUnitFrequency\", void 0), Object(n.a)([Object(r.serialize)()], t.prototype, \"minorUnitVisibility\", void 0), Object(n.a)([Object(r.serialize)()], t.prototype, \"opacity\", void 0), Object(n.a)([Object(r.serialize)()], t.prototype, \"preMultiplyAlpha\", void 0), Object(n.a)([Object(r.serializeAsTexture)(\"opacityTexture\")], t.prototype, \"_opacityTexture\", void 0), Object(n.a)([Object(r.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")], t.prototype, \"opacityTexture\", void 0), t;\n      }(r.PushMaterial);\n\n      r._TypeStore.RegisteredTypes[\"BABYLON.GridMaterial\"] = f, i.d(t, \"GridMaterial\", function () {\n        return f;\n      });\n    },\n    2: function (e, t) {\n      var i;\n\n      i = function () {\n        return this;\n      }();\n\n      try {\n        i = i || new Function(\"return this\")();\n      } catch (e) {\n        false && (i = window);\n      }\n\n      e.exports = i;\n    },\n    25: function (e, t, i) {\n      \"use strict\";\n\n      i.r(t), function (e) {\n        var n = i(11);\n        i.d(t, \"GridMaterial\", function () {\n          return n.GridMaterial;\n        });\n        var r = void 0 !== e ? e : false ? window : void 0;\n        if (void 0 !== r) for (var o in n) r.BABYLON[o] = n[o];\n      }.call(this, i(2));\n    }\n  });\n});","map":{"version":3,"sources":["/Users/RescueAMeza_SD/Desktop/mezaWebLab/Personal/alexmeza.me/assets/js/vendor/babylon.gridMaterial.min.js"],"names":["e","t","exports","module","require","define","amd","MATERIALS","BABYLON","self","global","i","n","r","l","call","m","c","d","o","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","setPrototypeOf","__proto__","Array","constructor","arguments","length","a","getOwnPropertyDescriptor","Reflect","decorate","Effect","ShadersStore","gridPixelShader","gridVertexShader","OPACITY","TRANSPARENT","FOG","PREMULTIPLYALPHA","UV1","UV2","INSTANCES","rebuild","b","MaterialDefines","f","mainColor","Color3","Black","lineColor","Teal","gridRatio","gridOffset","Vector3","Zero","majorUnitFrequency","minorUnitVisibility","opacity","preMultiplyAlpha","_gridControl","Vector4","needAlphaBlending","_opacityTexture","isReady","needAlphaBlendingForMesh","isReadyForSubMesh","isFrozen","effect","_wasPreviouslyReady","_materialDefines","getScene","checkReadyOnEveryCall","_renderId","getRenderId","markAsUnprocessed","_areTexturesDirty","_needUVs","texturesEnabled","MaterialFlags","OpacityTextureEnabled","MaterialHelper","PrepareDefinesForMisc","fogEnabled","PrepareDefinesForFrameBoundValues","getEngine","isDirty","markAsProcessed","resetCachedMaterial","PrepareDefinesForAttributes","VertexBuffer","PositionKind","NormalKind","push","UVKind","UV2Kind","PrepareAttributesForInstances","toString","setEffect","createEffect","onCompiled","onError","bindForSubMesh","_activeEffect","bindOnlyWorldMatrix","setMatrix","getViewMatrix","getProjectionMatrix","_mustRebind","setColor3","setVector3","x","y","Math","round","z","w","setVector4","setTexture","setFloat2","coordinatesIndex","level","getTextureMatrix","BindFogParameters","_afterBind","dispose","clone","SerializationHelper","Clone","serialize","Serialize","customType","getClassName","Parse","name","serializeAsColor3","serializeAsTexture","expandToProperty","PushMaterial","_TypeStore","RegisteredTypes","Function","window","GridMaterial"],"mappings":"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","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"babylonjs\")):\"function\"==typeof define&&define.amd?define(\"babylonjs-materials\",[\"babylonjs\"],t):\"object\"==typeof exports?exports[\"babylonjs-materials\"]=t(require(\"babylonjs\")):e.MATERIALS=t(e.BABYLON)}(\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:this,function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=25)}({0:function(t,i){t.exports=e},1:function(e,t,i){\"use strict\";i.d(t,\"b\",function(){return r}),i.d(t,\"a\",function(){return o});\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function r(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function o(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a}},11:function(e,t,i){\"use strict\";i.r(t);var n=i(1),r=i(0),o=\"#extension GL_OES_standard_derivatives : enable\\n#define SQRT2 1.41421356\\n#define PI 3.14159\\nprecision highp float;\\nuniform vec3 mainColor;\\nuniform vec3 lineColor;\\nuniform vec4 gridControl;\\nuniform vec3 gridOffset;\\n\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\n#include<fogFragmentDeclaration>\\n\\n#ifdef OPACITY\\nvarying vec2 vOpacityUV;\\nuniform sampler2D opacitySampler;\\nuniform vec2 vOpacityInfos;\\n#endif\\nfloat getVisibility(float position) {\\n\\nfloat majorGridFrequency=gridControl.y;\\nif (floor(position+0.5) == floor(position/majorGridFrequency+0.5)*majorGridFrequency)\\n{\\nreturn 1.0;\\n}\\nreturn gridControl.z;\\n}\\nfloat getAnisotropicAttenuation(float differentialLength) {\\nconst float maxNumberOfLines=10.0;\\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\\n}\\nfloat isPointOnLine(float position,float differentialLength) {\\nfloat fractionPartOfPosition=position-floor(position+0.5);\\nfractionPartOfPosition/=differentialLength;\\nfractionPartOfPosition=clamp(fractionPartOfPosition,-1.,1.);\\nfloat result=0.5+0.5*cos(fractionPartOfPosition*PI);\\nreturn result;\\n}\\nfloat contributionOnAxis(float position) {\\nfloat differentialLength=length(vec2(dFdx(position),dFdy(position)));\\ndifferentialLength*=SQRT2;\\n\\nfloat result=isPointOnLine(position,differentialLength);\\n\\nfloat visibility=getVisibility(position);\\nresult*=visibility;\\n\\nfloat anisotropicAttenuation=getAnisotropicAttenuation(differentialLength);\\nresult*=anisotropicAttenuation;\\nreturn result;\\n}\\nfloat normalImpactOnAxis(float x) {\\nfloat normalImpact=clamp(1.0-3.0*abs(x*x*x),0.0,1.0);\\nreturn normalImpact;\\n}\\nvoid main(void) {\\n\\nfloat gridRatio=gridControl.x;\\nvec3 gridPos=(vPosition+gridOffset.xyz)/gridRatio;\\n\\nfloat x=contributionOnAxis(gridPos.x);\\nfloat y=contributionOnAxis(gridPos.y);\\nfloat z=contributionOnAxis(gridPos.z);\\n\\nvec3 normal=normalize(vNormal);\\nx*=normalImpactOnAxis(normal.x);\\ny*=normalImpactOnAxis(normal.y);\\nz*=normalImpactOnAxis(normal.z);\\n\\nfloat grid=clamp(x+y+z,0.,1.);\\n\\nvec3 color=mix(mainColor,lineColor,grid);\\n#ifdef FOG\\n#include<fogFragment>\\n#endif\\nfloat opacity=1.0;\\n#ifdef TRANSPARENT\\nopacity=clamp(grid,0.08,gridControl.w*grid);\\n#endif\\n#ifdef OPACITY\\nopacity*=texture2D(opacitySampler,vOpacityUV).a;\\n#endif\\n\\ngl_FragColor=vec4(color.rgb,opacity);\\n#ifdef TRANSPARENT\\n#ifdef PREMULTIPLYALPHA\\ngl_FragColor.rgb*=opacity;\\n#endif\\n#else\\n#endif\\n}\";r.Effect.ShadersStore.gridPixelShader=o;var a=\"precision highp float;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\n#ifdef UV1\\nattribute vec2 uv;\\n#endif\\n#ifdef UV2\\nattribute vec2 uv2;\\n#endif\\n#include<instancesDeclaration>\\n\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\n#include<fogVertexDeclaration>\\n#ifdef OPACITY\\nvarying vec2 vOpacityUV;\\nuniform mat4 opacityMatrix;\\nuniform vec2 vOpacityInfos;\\n#endif\\nvoid main(void) {\\n#include<instancesVertex>\\nvec4 worldPos=finalWorld*vec4(position,1.0);\\n#include<fogVertex>\\nvec4 cameraSpacePosition=view*worldPos;\\ngl_Position=projection*cameraSpacePosition;\\n#ifdef OPACITY\\n#ifndef UV1\\nvec2 uv=vec2(0.,0.);\\n#endif\\n#ifndef UV2\\nvec2 uv2=vec2(0.,0.);\\n#endif\\nif (vOpacityInfos.x == 0.)\\n{\\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\\n}\\nelse\\n{\\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\\n}\\n#endif\\nvPosition=position;\\nvNormal=normal;\\n}\";r.Effect.ShadersStore.gridVertexShader=a;var c=function(e){function t(){var t=e.call(this)||this;return t.OPACITY=!1,t.TRANSPARENT=!1,t.FOG=!1,t.PREMULTIPLYALPHA=!1,t.UV1=!1,t.UV2=!1,t.INSTANCES=!1,t.rebuild(),t}return Object(n.b)(t,e),t}(r.MaterialDefines),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.mainColor=r.Color3.Black(),n.lineColor=r.Color3.Teal(),n.gridRatio=1,n.gridOffset=r.Vector3.Zero(),n.majorUnitFrequency=10,n.minorUnitVisibility=.33,n.opacity=1,n.preMultiplyAlpha=!1,n._gridControl=new r.Vector4(n.gridRatio,n.majorUnitFrequency,n.minorUnitVisibility,n.opacity),n}return Object(n.b)(t,e),t.prototype.needAlphaBlending=function(){return this.opacity<1||this._opacityTexture&&this._opacityTexture.isReady()},t.prototype.needAlphaBlendingForMesh=function(e){return this.needAlphaBlending()},t.prototype.isReadyForSubMesh=function(e,t,i){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t._materialDefines||(t._materialDefines=new c);var n=t._materialDefines,o=this.getScene();if(!this.checkReadyOnEveryCall&&t.effect&&this._renderId===o.getRenderId())return!0;if(n.TRANSPARENT!==this.opacity<1&&(n.TRANSPARENT=!n.TRANSPARENT,n.markAsUnprocessed()),n.PREMULTIPLYALPHA!=this.preMultiplyAlpha&&(n.PREMULTIPLYALPHA=!n.PREMULTIPLYALPHA,n.markAsUnprocessed()),n._areTexturesDirty&&(n._needUVs=!1,o.texturesEnabled&&this._opacityTexture&&r.MaterialFlags.OpacityTextureEnabled)){if(!this._opacityTexture.isReady())return!1;n._needUVs=!0,n.OPACITY=!0}if(r.MaterialHelper.PrepareDefinesForMisc(e,o,!1,!1,this.fogEnabled,!1,n),r.MaterialHelper.PrepareDefinesForFrameBoundValues(o,o.getEngine(),n,!!i),n.isDirty){n.markAsProcessed(),o.resetCachedMaterial(),r.MaterialHelper.PrepareDefinesForAttributes(e,n,!1,!1);var a=[r.VertexBuffer.PositionKind,r.VertexBuffer.NormalKind];n.UV1&&a.push(r.VertexBuffer.UVKind),n.UV2&&a.push(r.VertexBuffer.UV2Kind),r.MaterialHelper.PrepareAttributesForInstances(a,n);var f=n.toString();t.setEffect(o.getEngine().createEffect(\"grid\",a,[\"projection\",\"mainColor\",\"lineColor\",\"gridControl\",\"gridOffset\",\"vFogInfos\",\"vFogColor\",\"world\",\"view\",\"opacityMatrix\",\"vOpacityInfos\"],[\"opacitySampler\"],f,void 0,this.onCompiled,this.onError),n)}return!(!t.effect||!t.effect.isReady())&&(this._renderId=o.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,i){var n=this.getScene(),o=i._materialDefines;if(o){var a=i.effect;a&&(this._activeEffect=a,o.INSTANCES||this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix(\"view\",n.getViewMatrix()),this._activeEffect.setMatrix(\"projection\",n.getProjectionMatrix()),this._mustRebind(n,a)&&(this._activeEffect.setColor3(\"mainColor\",this.mainColor),this._activeEffect.setColor3(\"lineColor\",this.lineColor),this._activeEffect.setVector3(\"gridOffset\",this.gridOffset),this._gridControl.x=this.gridRatio,this._gridControl.y=Math.round(this.majorUnitFrequency),this._gridControl.z=this.minorUnitVisibility,this._gridControl.w=this.opacity,this._activeEffect.setVector4(\"gridControl\",this._gridControl),this._opacityTexture&&r.MaterialFlags.OpacityTextureEnabled&&(this._activeEffect.setTexture(\"opacitySampler\",this._opacityTexture),this._activeEffect.setFloat2(\"vOpacityInfos\",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),this._activeEffect.setMatrix(\"opacityMatrix\",this._opacityTexture.getTextureMatrix()))),r.MaterialHelper.BindFogParameters(n,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var i=this;return r.SerializationHelper.Clone(function(){return new t(e,i.getScene())},this)},t.prototype.serialize=function(){var e=r.SerializationHelper.Serialize(this);return e.customType=\"BABYLON.GridMaterial\",e},t.prototype.getClassName=function(){return\"GridMaterial\"},t.Parse=function(e,i,n){return r.SerializationHelper.Parse(function(){return new t(e.name,i)},e,i,n)},Object(n.a)([Object(r.serializeAsColor3)()],t.prototype,\"mainColor\",void 0),Object(n.a)([Object(r.serializeAsColor3)()],t.prototype,\"lineColor\",void 0),Object(n.a)([Object(r.serialize)()],t.prototype,\"gridRatio\",void 0),Object(n.a)([Object(r.serializeAsColor3)()],t.prototype,\"gridOffset\",void 0),Object(n.a)([Object(r.serialize)()],t.prototype,\"majorUnitFrequency\",void 0),Object(n.a)([Object(r.serialize)()],t.prototype,\"minorUnitVisibility\",void 0),Object(n.a)([Object(r.serialize)()],t.prototype,\"opacity\",void 0),Object(n.a)([Object(r.serialize)()],t.prototype,\"preMultiplyAlpha\",void 0),Object(n.a)([Object(r.serializeAsTexture)(\"opacityTexture\")],t.prototype,\"_opacityTexture\",void 0),Object(n.a)([Object(r.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")],t.prototype,\"opacityTexture\",void 0),t}(r.PushMaterial);r._TypeStore.RegisteredTypes[\"BABYLON.GridMaterial\"]=f,i.d(t,\"GridMaterial\",function(){return f})},2:function(e,t){var i;i=function(){return this}();try{i=i||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(i=window)}e.exports=i},25:function(e,t,i){\"use strict\";i.r(t),function(e){var n=i(11);i.d(t,\"GridMaterial\",function(){return n.GridMaterial});var r=void 0!==e?e:\"undefined\"!=typeof window?window:void 0;if(void 0!==r)for(var o in n)r.BABYLON[o]=n[o]}.call(this,i(2))}})});"]},"metadata":{},"sourceType":"script"}